# 词法元素 Lexical elements

## 总览

构成go应用程序的基本元素：

- 注释
- 标识符
- 关键字
- 运算符和标点
- 字面量
- 分号
- 空白

示例：

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/13080/1712462065009/945285f86de6418483be609f843ddcb8.png)

## 注释 Comments

注释充当程序文档，给程序员Coder看的。

Go支持两种注释格式：

- 行注释：开始于 `//` 结束语行尾
- 通用注释（General comments），也叫块注释，多行注释：开始于 `/*` 结束于 `*/`

注释（不包含换行符的）被视为一个空格，因此可以在程序内部，空格处使用注释（通用注释）

示例：

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/13080/1712462065009/09edc034660248eea32221ff15fc20bb.png)

> 编程写注释是一个好习惯，写注释的程序员是个好人！
>
> 应该遵循，项目规范的注释风格

## 标识符 Identifiers

标识符为程序的实体命名，例如包名、函数名、变量名等。

特点：

- 标识符是由一个或多个字母和数字组成的序列
  - 字母指的是Unicode Letter分类的内容，包括但不限于：英文字母、拉丁字母、罗马字母、中文等。参考：https://symbl.cc/cn/unicode-table/
- 下划线 `_`被视为一个小写字母
- 标识符的第一个字符必须是字母
- 标识符大小写敏感
- `_`为匿名标识符

示例：

```go
a
_x9
ThisVariableIsExported
αβ
Go语言
标识符Σ
XȠ

```

典型的命名方案：

- 驼峰命名法，Camel Case：每个单词的首字母大写，如 `firstName`
- 帕斯卡命名法，Pascal Case：与驼峰命名法类似，但名列前茅个单词的首字母也大写，如 `FirstName`
- 下划线命名法，Snake Case：单词之间用下划线连接，如 `first_name`
- 语义清晰，见名知意，尽量简洁

Go 预定义了一些标识符(1.18+)，不能再使用这些标识符了：

```go
Types:
	any bool byte comparable
	complex64 complex128 error float32 float64
	int int8 int16 int32 int64 rune string
	uint uint8 uint16 uint32 uint64 uintptr

Constants:
	true false iota

Zero value:
	nil

Functions:
	append cap clear close complex copy delete imag len
	make max min new panic print println real recover
```

## 关键字 Keywords

关键字是程序定义的，具有特殊语义的符号，是程序功能的核心实现。

Go语言支持以下关键字：

```go
break        default      func         interface    select
case         defer        go           map          struct
chan         else         goto         package      switch
const        fallthrough  if           range        type
continue     for          import       return       var
```

关键字不能作为标识符使用。

## 运算符和标点 operators and punctuation

运算符和标点，具有特殊的语义的符号。其作用是将运算数组合成表达式，例如 `3 + 5`。

Go语言支持的运算符和标点：

```go
// 运算符
+    &     +=    &=     &&    ==    !=    (    )
-    |     -=    |=     ||    <     <=    [    ]
*    ^     *=    ^=     <-    >     >=    {    }
/    <<    /=    <<=    ++    =     :=    ,    ;
%    >>    %=    >>=    --    !     ...   .    :
     &^          &^=          ~
```

## 字面量 Literals

编程语言源程序中表示固定值的符号叫做字面量。不同数据类型值的直接表示，与类型相关：

Go语言支持如下类型的字面量：

- Integer literals
- Floating-point literals
- Imaginary literals
- Rune literals
- String literals

示例：

```go
var intLiteral = 42
var floatLiteral = 42.24
var runeLiteral = 'X'
var stringLiteral = "GoLang"
var imgLiteral = 0i

```

其他构造类型的值（后面也可称字面量）是由标点符号（运算符）配合字面量构造出来的，例如：

```go
// 构造类型的值（特定类型的字面量）
var arrayLiteral = [2]int{4, 2}
var sliceLiteral = []int{4, 2}
var mapLiteral = map[string]int{"go": 22, "cpp": 30}
var structLiteral = struct {
	Name string
}{
	Name: "GoLang",
}

// bool，具有常量true,false两个值
var boolLiteral = true

// nil，是一个预定义的标识符
var pointer *int = nil
```

> 后续，都可以将这些值称为字面量

## 分号 Semicolons

分号是常规的语句结束符，但Go语言多数情况下可以省略。

两条规则可以省略语句结束符分号（自动插入）：

1. 如果行以下面的符号结尾可以省略分号，相当于分号自动插入到行尾
   1. 标识符
   2. integer, floating-point, imaginary, rune,  string 类型字面量
   3. 关键字：`break`, `continue`, `fallthrough`,  `return`
   4. 运算符和标点：`++`, `--`, `)`, `]`, or `}`
2. 结束的 `")"` or `"}"`前，可以省略分号，以允许一条复杂语句完全显示在一个代码行

示例：

```go
package main

import "fmt"

// main.main 应用程序入口函数
func main() {
	// 输出 Hello World
	fmt.Println("Hello World")

	{fmt.Println("G");fmt.Println("o");}
	{fmt.Println("G");fmt.Println("o")}

	for i := 0; i < 10; i++ {fmt.Println(i);}
	for i := 0; i < 10; i++ {fmt.Println(i)}
}
```

![image.png](https://fynotefile.oss-cn-zhangjiakou.aliyuncs.com/fynote/fyfile/13080/1712462065009/0f46139121294667a87f3c01c78061ce.png)

推荐省略分号。

## 符号和空白字符 Token and White space

符号就这些词法元素，有四类：

1. 标识符
2. 关键字
3. 运算符和标点
4. 字面量

空白会被忽略，除非用于将符号进行分割。空白包括：

1. 空格，spaces (U+0020)
2. 水平制表符，horizontal tabs (U+0009)
3. 回车，carriage returns (U+000D)
4. 换行，newlines (U+000A)

## 小结

Go语言是编译型语言，需要编译才能运行。也就是说代码在运行之前需要通过编译器生成二进制机器码。编译的基本流程：

1. 源代码：用户编写的.go文件内容
2. 词法分析：将源代码分解为标记（token）
3. 语法分析：将标记组合成语法结构
4. 类型检查：检查语法结构是否符合Go语言的类型系统
5. 代码生成：将语法结构转换为机器代码
6. 链接：将机器代码链接成一个可执行程序

词法分析器将源代码分解为标记，示例：

源码：

```go
func main() {
  fmt.Println("Hello, world!")
}
```

词法分析后，得到的token（符号）：

```go
func
main
(
)
{
fmt
.
Println
(
"Hello, world!"
)
}
```

这就是我们所说的词法元素。
